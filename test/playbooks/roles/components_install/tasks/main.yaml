---
# Components installation entry point
# Conditionally uses MCE Helm chart or standard installation based on USE_MCE_CHART env var

- name: Display installation mode
  ansible.builtin.debug:
    msg: "Installing components with MCE chart: {{ use_mce_chart }}, Mode: {{ installation_mode }}"

# Install common components (cert-manager, ironic, BMO, MetalLB, nginx-ingress)
- name: Install common components
  ansible.builtin.include_tasks: common.yaml

# Conditionally install CAPI components
- name: Install CAPI components via standard method
  ansible.builtin.include_tasks: capi_standard.yaml
  when: not use_mce_chart

- name: Install CAPI components via MCE chart
  ansible.builtin.include_tasks: capi_mce.yaml
  when: use_mce_chart
